(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[467],{tLJX:function(e,t,a){"use strict";a.d(t,"a",(function(){return useAppHeaderProps}));var n=a("wx14"),i=a("ODXe"),o=a("yrBZ"),c=a("ZMKu"),l=a("q1tI"),r=a.n(l),s=a("/MKj"),b=(a("tYyt"),a("6itM")),d=a("z9go"),u=a("gtj7"),m=a("b0K7"),g=a("yy36"),p=a("6lXR"),_=a("Rab/"),f=a("BkCY"),E=a("j2ZW"),O=a("cdDR"),h=a("Apmp"),j=a("TSYQ"),v=a.n(j),x=a("QJz3"),y=a("ixXQ"),A={bell:"bell__AzBwO6vfXd1vBBNs_toEi",light:"light__2QkOxErjEG_gJjXx-P0vkr",unread:"unread__CEzUq-gsL9aPdjh-k_4RR"};const NotificationBell=({theme:e="dark",unreadCount:t,onClick:a})=>{const n=Object(l.useState)(),c=Object(i.a)(n,2),s=c[0],b=c[1],d=Object(x.a)(y.a.HEADER_AREA),u=d.data,m=d.actions,g=u.notifications;Object(l.useEffect)((()=>{b(window.document.querySelector('link[rel="shortcut icon"]'))}),[]),Object(l.useEffect)((()=>{s&&(s.href=`/favicon${t?"-unread":""}.ico`)}),[t,s]);const p=v()(A.bell,A[""+e]);return r.a.createElement("button",{className:p,onClick:()=>{a&&a(),0!==t&&m.notificationsMarkedRead(g.map((e=>e.id)))},type:"button","aria-label":t>0?`Toggle Notification Menu, ${t} notifications`:"Toggle Notification Menu"},r.a.createElement(h.a,{size:20}),0!==t&&r.a.createElement(o.a,{id:"notification-count",bg:"red-500",borderRadius:"3px",height:"18",position:"absolute",left:"16",textAlign:"center",top:"-8",width:"20"},r.a.createElement("p",{className:A.unread},t>99?99:t)))};var S=a("DZdY"),C=a("uQrA"),k=a("QqFe"),w=a("9m3B"),D=a("udU5"),R=a("630U"),T=a("7xvl");const N={"location/DASHBOARD":"dashboard_v2","location/CATALOG":"catalog","location/COURSE":"course_landing_page","location/PATH":"path_landing_page","location/COURSE_CONTENT_ITEM":"le_course_content_item","location/PATH_CONTENT_ITEM":"le_path_content_item"},buildTrackNotificationClickHandler=e=>t=>{Object(d.b)("notification","clicked",{target:"notification_bell_cta",page_name:e&&N[e]||null,event_id:t.id,context:t.campaign,element:t.type}),Object(d.c)({target:"notification_bell_cta",page_name:e&&N[e],context:"topnav_bell",slug:t.campaign,element:t.type})},getSortedNotifications=(e,t)=>e.length?e.sort(byDateComparator).slice(0,t).map((e=>{var t,a;return{date:Object(T.a)(new Date(e.time)),id:e.id,iconSettings:{color:R.g["blue-900"]},link:e.href,text:e.description,unread:1===e.status,campaign:e.campaign_name,imageUrl:"url"===(null===(t=e.img)||void 0===t?void 0:t.type)?null===(a=e.img)||void 0===a?void 0:a.slug:"",type:e.type}})):[],byDateComparator=(e,t)=>new Date(t.time).getTime()-new Date(e.time).getTime();const M=Object(S.a)(o.a,{target:"e1ap6r091",label:"StyledScrollBox"})("");M.defaultProps={maxHeight:"520",overflow:"auto",tabIndex:-1};const B=Object(S.a)(o.a,{target:"e1ap6r090",label:"StyledShowMoreBox"})({name:"1urx3um",styles:"padding-bottom:1px"}),NotificationsList=({locationType:e,clearNotifications:t,notifications:a})=>{const n=Object(l.useState)(!1),c=Object(i.a)(n,2),s=c[0],b=c[1],u=s?[a.length,"Less"]:[3,"More"],m=Object(i.a)(u,2),g=m[0],p=m[1],_=a.length>0&&a.length<=g,handleShowMoreOrLess=()=>{s&&(e=>{Object(d.c)({target:"notification_show_more",page_name:e&&N[e],context:"topnav_bell"})})(e),b(!s)},clearAll=()=>{t(a.map((e=>e.id))),(e=>{Object(d.c)({target:"notification_clear_all",page_name:e&&N[e],context:"topnav_bell"})})(e)},clearOne=a=>{t([a.id]),((e,t)=>{Object(d.c)({target:"notification_clear",page_name:t&&N[t],slug:e.campaign,element:e.type,context:"topnav_bell"})})(a,e)};return r.a.createElement(R.a,{bg:"white",pt:32,pb:24,tabIndex:-1,role:"dialog","aria-label":`My notifications, ${a.length} notifications`},r.a.createElement(o.b,{alignItems:"center",flexDirection:"row",height:"40",justifyContent:"space-between",px:32,mb:16},r.a.createElement(C.a,{as:"h1",fontSize:22},"My Notifications"),_&&r.a.createElement(k.e,{onClick:clearAll,"aria-label":`Clear all ${a.length} notifications`},"Clear All")),r.a.createElement(o.a,{px:32},r.a.createElement(w.a,{name:"checkerDense",height:"1px",display:"flex"})),r.a.createElement(M,null,r.a.createElement(o.a,{pb:16},r.a.createElement(D.a,{notifications:getSortedNotifications(a,g),onNotificationClick:buildTrackNotificationClickHandler(e),onDismiss:e=>clearOne(e)})),a.length<=3?null:r.a.createElement(B,{px:32},r.a.createElement(k.e,{onClick:handleShowMoreOrLess,"data-testid":"Show "+p},"Show ",p))))};var U=a("Xxlx");const NotificationsDropdown=e=>{const t=Object(x.a)(y.a.HEADER_AREA),a=t.data,n=t.actions,c=a.notifications,s=a.unreadCount,b=n.notificationsDeleted,d=e.locationType,u=Object(l.useRef)(null),m=Object(l.useState)(!1),g=Object(i.a)(m,2),p=g[0],_=g[1],f=r.a.createElement("div",{ref:u},r.a.createElement(o.b,{height:"40",alignItems:"center",justifyContent:"center"},r.a.createElement(U.a,{data:{context:"global_nav",target:"notification_bell"},disableTracking:!!p,"aria-label":"notifications","data-testid":"notification_bell"},r.a.createElement(NotificationBell,{theme:e.theme,key:"notification-bell",unreadCount:s,onClick:()=>{_(!p)}}))));return r.a.createElement(r.a.Fragment,null,f,r.a.createElement(O.a,{align:"right",verticalOffset:1,outline:!0,isOpen:p,onRequestClose:()=>{_(!1)},targetRef:u},r.a.createElement(o.b,{bg:"white",width:360,textAlign:"left"},r.a.createElement(NotificationsList,{locationType:d,notifications:c,clearNotifications:b}))))},MobileBell=({onClick:e})=>{const t=Object(x.b)(y.a.HEADER_AREA).unreadCount;return r.a.createElement(NotificationBell,{unreadCount:t,onClick:e})},MobileNotificationsList=()=>{const e=Object(x.b)(y.a.HEADER_AREA).notifications,t=Object(x.c)().notificationsDeleted;return e&&r.a.createElement(NotificationsList,{notifications:e,clearNotifications:t})},H={onEnable:()=>{Object(d.c)({context:"global_nav",target:"topnav_search"})},onSearch:e=>{window.location.assign(Object(m.Zb)(e))},onTrackingClick:e=>{Object(d.c)({context:"searchbar",target:e})}},L={initial:"exit",animate:"enter",exit:"exit",variants:{enter:{opacity:1,transition:{duration:.2}},exit:{opacity:0,transition:{duration:.2}}}},useAppHeaderProps=()=>{var e;const t=Object(s.useSelector)(g.z),a=Object(s.useSelector)(g.r),O=Object(s.useSelector)(g.s),h=Object(s.useSelector)(g.v),j=Object(s.useSelector)(g.A),v=Object(s.useSelector)(g.B),x=Object(s.useSelector)(g.I),y=Object(p.a)("favorites_prototype"),A=null===(e=Object(s.useSelector)(g.h))||void 0===e?void 0:e.profileImage,S=Object(s.useSelector)(g.j),C=Object(s.useSelector)(_.i),k=Object(s.useSelector)(_.n),w=Object(s.useSelector)(g.y),D=Object(l.useState)(!1),R=Object(i.a)(D,2),T=R[0],N=R[1],toggleMobileNotifications=()=>{T&&Object(d.c)({target:"notification_bell",context:"global_nav"}),N(!T)},handleClick=(e,t)=>{"render-element"!==t.type&&Object(d.c)({context:"global_nav",target:t.trackingTarget})},M=window.location.href;return[t?{type:j?"pro":"free",action:handleClick,user:{avatar:A,displayName:S,isAccountManager:a,isAdmin:O,isCustomerSupport:h,isPaused:v,showProUpgrade:!x||Object(b.b)(),proCheckoutUrl:Object(m.Fb)({redirectUrl:Object(u.c)(C)}),showReferrals:j&&!w&&!Object(b.b)()||O},renderFavorites:y?{desktop:()=>r.a.createElement(f.a,null)}:void 0,renderNotifications:{desktop:()=>(e=>r.a.createElement(E.a,{"data-testid":"header-notifications"},r.a.createElement(NotificationsDropdown,{theme:"dark",locationType:e})))(k),mobile:()=>(e=>r.a.createElement(E.a,{"data-testid":"header-mobile-notifications"},r.a.createElement(MobileBell,{onClick:e})))(toggleMobileNotifications)},search:H}:{type:"anon",variant:(null==C?void 0:C.pathname.includes("login"))?"login":(null==C?void 0:C.pathname.includes("register"))?"signup":"/"===(null==C?void 0:C.pathname)?"landing":void 0,action:handleClick,redirectParam:M,search:H},T&&r.a.createElement(o.a,{display:{_:"block",md:"none"}},r.a.createElement(c.a,null,r.a.createElement(c.b.div,Object(n.a)({key:"mobile notifications"},L,{"data-testid":"header-mobile-notifications-dropdown"}),r.a.createElement(MobileNotificationsList,null))))]}}}]);
//# sourceMappingURL=467.e2fa7f6c43af582b782c.chunk.js.map